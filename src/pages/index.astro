---
import Layout from '~/layouts/layout.astro';
import { Header } from '~/components/home/';
import { GameList } from '~/components/home/game-list';
import { ContentContainer } from '~/components/home/content-container';

export const description =
  'Byte Sized Game is a collection of casual mini-games for quick fun in your browser. Built with a modern tech stack of React and Astro, this project demonstrates interactive front-end skills.';

const pages = Object.entries<{ url: string; title: string; publish: boolean }>(
  import.meta.glob('./game/*.astro', { eager: true })
)
  .map(([path, page]) => {
    const { url, title, publish } = page;

    return {
      path,
      url,
      title,
      publish,
    };
  })
  .filter((page) => page.publish);
---

<Layout description={description}>
  <ContentContainer>
    <Header />
    <GameList pages={pages} />
  </ContentContainer>
</Layout>
